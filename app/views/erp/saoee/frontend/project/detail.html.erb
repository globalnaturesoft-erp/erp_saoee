<% content_for :page_style do %>
    <link rel="stylesheet" href="/frontend/css/project.css" />
<% end %>

<%
    if I18n.locale == :en
        project_name = @project.en_name
        project_location = @project.en_location
        project_description = @project.en_description
    elsif I18n.locale == :ja
        project_name = @project.ja_name
        project_location = @project.ja_location
        project_description = @project.ja_description
    else
        project_name = @project.name
        project_location = @project.location
        project_description = @project.description
    end
%>

<% title project_name %>
<% full_domain_path = request.env['rack.url_scheme'] + '://' + request.host_with_port %>

<% content_for :metas do %>

    <!-- Facebook Open Graph -->
    <meta property="og:url" content="<%= request.url %>"/>
    <meta property="og:type" content="object" />
    <meta property="og:title" content="<%= project_name %>"/>
    <% if @meta_description.present? %>
    <meta property="og:description" content="<%= @meta_description %>"/>
    <% else %>
    <meta property="og:description" content="<%= project_name %>"/>
    <% end %>
    <meta property="og:site_name" content="SAO-EE.VN">
    <meta property="og:image" content="<%= full_domain_path %><%= @project.image %>" />
    <meta property="og:locale" content="<%= (I18n.locale == :vi) ? 'vi_VN' : 'en_US' %>">

    <!-- Google+ Open Graph -->
    <meta itemprop="name" content="<%= project_name %>">
    <% if @meta_description.present? %>
    <meta itemprop="description" content="<%= @meta_description %>">
    <% else %>
    <meta itemprop="description" content="<%= project_name %>">
    <% end %>
    <meta itemprop="image" content="<%= full_domain_path %><%= @project.image %>">

    <!-- Twitter Open Graph -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@SAOEE">
    <meta name="twitter:title" content="<%= project_name %>">
    <% if @meta_description.present? %>
    <meta name="twitter:description" content="<%= @meta_description %>"/>
    <% else %>
    <meta name="twitter:description" content="<%= project_name %>"/>
    <% end %>
    <meta name="twitter:image" content="<%= full_domain_path %><%= @project.image %>">
<% end %>

<!-- PAGE HEADING-->
<section class="section__banner">
    <div class="banner__container container-fluid px-0">
        <div class="banner__image z-0">
            <img src="/frontend/images/b3cdf315c50cdc2ea383403ddff9f6c1.jpg" alt="">
        </div>
        <div class="banner__container container d-flex align-items-center">
            <h1 class="banner__title fw-bold text-white text-capitalize">
                <%= project_name %>
            </h1>
        </div>
    </div>
    <div class="banner__nav">
        <div class="nav__container container d-flex align-items-center text-black-4 fs-6 h-100">
            <%= link_to '<i class="fa-solid fa-house"></i>'.html_safe, erp_saoee.root_path, class: 'text-secondary' %>
            <i class="fa-solid fa-angle-right"></i>
            <%= link_to t('project'), erp_saoee.project_path, class: 'fw-semibold text-uppercase text-secondary' %>
            <i class="fa-solid fa-angle-right"></i>
            <span class="fw-semibold text-uppercase text-red"><%= project_name %></span>
        </div>
    </div>
</section>
<!-- END PAGE HEADING-->

<!-- PROJECT DETAIL-->
<section class="glbg py-0 py-sm-0 py-md-0 py-lg-5">
    <div class="container">
        <div class="row row-sp-stretch bg-black-7 py-4 px-4 px-sm-4 px-md-4 px-lg-5">
            <div class="col-6 col-sm-6 col-md-6 col-lg-5 pb-3 pb-sm-3 pb-md-3 pb-lg-0">
                <label class="text-black-4 text-uppercase"><%= t('.location') %></label>
                <p class="fw-bold fs-20 mb-0"><%= project_location %></p>
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-2 pb-3 pb-sm-3 pb-md-3 pb-lg-0">
                <label class="text-black-4 text-uppercase"><%= t('.area') %></label>
                <p class="fw-bold fs-20 mb-0"><%= @project.area.present? ? "#{@project.area}m<sup>2</sup>".html_safe : "N/A" %></p>
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-3">
                <label class="text-black-4 text-uppercase"><%= t('.start_date') %></label>
                <p class="fw-bold fs-20 mb-0"><%= @project.start_date.present? ? @project.start_date.strftime('%d/%m/%Y') : "N/A" %></p>
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-2">
                <label class="text-black-4 text-uppercase"><%= t('.completion_date') %></label>
                <p class="fw-bold fs-20 mb-0"><%= @project.completion_date.present? ? @project.completion_date.strftime('%d/%m/%Y') : "N/A" %></p>
            </div>
        </div>

        <div class="row py-5">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 mb-4 mb-sm-5 mb-md-5 mb-lg-0">
                <%= project_description.html_safe %>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <% if !@project.project_images.empty? %>
                    <div class="masonry-row js-isotope-wrapper">
                        <div class="row isotope-content">
                            <% @project.project_images.each do |project_image| %>
                                <%
                                    project_image_name = project_image.name
                                    if project_image.name.present? and project_image.en_name.present? and project_image.ja_name.present?
                                        if I18n.locale == :vi
                                            project_image_name = project_image.name
                                        elsif I18n.locale == :en
                                            project_image_name = project_image.en_name
                                        elsif I18n.locale == :ja
                                            project_image_name = project_image.ja_name
                                        end
                                    end
                                %>
                                <div class="col-md-6 col-lg-4 isotope-item isotope-item-sizer py-2">
                                    <a href="<%= project_image.image_url %>" data-fancybox="images" data-caption="<%= project_image_name %>">
                                        <%= image_tag(project_image.image_url.thumb_640_467, alt: project_image_name, class: 'wp-post-image border') %>
                                    </a>
                                </div>
                            <% end %>
                        </div>
                    </div>
                <% end %>
            </div>
        </div>
    </div>
    <div class="container pb-5">
        <div class="row">
            <%= render 'erp/saoee/frontend/project/entry_social_share', project_name: project_name %>
            <%#= render 'erp/saoee/frontend/project/other_projects' %>
        </div>
    </div>
</section>
<!-- END PROJECT DETAIL-->

<!-- LASTEST PROJECT-->
<% if false %>
<section class="wrap wrap--w1790 p-b-75">
    <div class="container">
        <div class="section-title m-b-30">
            <h5 class="title-sub"><%= t('.latest_project_title_sub') %></h5>
            <h2 class="title-1"><%= t('.latest_project_title') %></h2>
        </div>
        <% if @newest_projects.count > 4 %>
            <div class="container-fluid">
                <div class="slick-wrap slick-project js-slick-wrapper" data-slick-xs="1" data-slick-sm="1" data-slick-md="3" data-slick-lg="4" data-slick-xl="4" data-slick-dots="false" data-slick-customnav="true" data-slick-autoplay="true">
                    <div class="slick-wrap-content">
                        <div class="slick-content js-slick-content">
                            <% @newest_projects.each do |project| %>
                                <%
                                    project_name = project.name
                                    if project.name.present? and project.en_name.present? and project.ja_name.present?
                                        if I18n.locale == :vi
                                            project_name = project.name
                                        elsif I18n.locale == :en
                                            project_name = project.en_name
                                        elsif I18n.locale == :ja
                                            project_name = project.ja_name
                                        end
                                    end
                                %>
                                <%
                                    project_location = project.location
                                    if project.location.present? and project.en_location.present? and project.ja_location.present?
                                        if I18n.locale == :vi
                                            project_location = project.location
                                        elsif I18n.locale == :en
                                            project_location = project.en_location
                                        elsif I18n.locale == :ja
                                            project_location = project.ja_location
                                        end
                                    end
                                %>
                                <div class="slick-item">
                                    <article class="media media-project">
                                        <figure class="media__img">
                                            <%= image_tag project.image.thumb_960_600, alt: project_name %>
                                        </figure>
                                        <div class="bg-overlay"></div>
                                        <span class="line"></span>
                                        <span class="line line--bottom"></span>
                                        <div class="media__body">
                                            <h3 class="title">
                                                <%= link_to project_name, project_link(project) %>
                                            </h3>
                                            <div class="address"><%= project_location %></div>
                                        </div>
                                    </article>
                                </div>
                            <% end %>
                        </div>
                    </div>
                    <div class="slick__nav arrows-1">
                        <i class="slick-prev slick-arrow js-slick-prev ti-angle-left"></i>
                        <i class="slick-next slick-arrow js-slick-next ti-angle-right"></i>
                    </div>
                </div>
            </div>
        <% else %>
            <div class="container">
                <div class="row gutter-xl">
                    <% @newest_projects.each do |project| %>
                        <%
                            project_name = project.name
                            if project.name.present? and project.en_name.present? and project.ja_name.present?
                                if I18n.locale == :vi
                                    project_name = project.name
                                elsif I18n.locale == :en
                                    project_name = project.en_name
                                elsif I18n.locale == :ja
                                    project_name = project.ja_name
                                end
                            end
                        %>
                        <div class="col-md-3">
                            <article class="media media-project m-b-50">
                                <figure class="media__img">
                                    <%= image_tag project.image.thumb_960_600, alt: project_name %> <!-- image_natural_size: 960x600px -->
                                </figure>
                                <div class="bg-overlay"></div>
                                <span class="line"></span>
                                <span class="line line--bottom"></span>
                                <div class="media__body">
                                    <h3 class="title">
                                        <%= link_to project_name, project_link(project) %>
                                    </h3>
                                    <div class="address"><%= project_location %></div>
                                </div>
                            </article>
                        </div>
                    <% end %>
                </div>
            </div>
        <% end %>
    </div>
</section>
<% end %>
<!-- END LASTEST PROJECT-->